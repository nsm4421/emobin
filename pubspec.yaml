name: emobin_workspace
description: Monorepo workspace for the emobin Flutter app and feature packages.
publish_to: 'none'

environment:
  sdk: ^3.9.2

workspace:
  - app
  - packages/core
  - packages/feature_auth
  - packages/feature_feed
  - packages/feature_security
  - packages/feature_setting
  - packages/infra_drift
  - packages/infra_supabase
  - packages/ui_theme

dev_dependencies:
  melos: ^7.0.0

melos:
  command:
    bootstrap:
      environment:
        sdk: ^3.9.2
      dependencies:
        flutter_bloc: ^8.1.6
        get_it: ^7.7.0
        injectable: ^2.5.2
      dev_dependencies:
        build_runner: ^2.10.5
        flutter_lints: ^5.0.0
        injectable_generator: ^2.10.0
  scripts:
    get: melos exec -- flutter pub get
    bootstrap:features: melos bootstrap --scope="feature_*"
    clean: melos exec -- flutter clean
    analyze: melos exec -- flutter analyze
    test: melos exec -- flutter test
    format: melos exec -- dart format .
    format:check: melos exec -- dart format --set-exit-if-changed .
    codegen: melos run codegen:core && melos run codegen:feature_auth && melos run codegen:feature_feed && melos run codegen:feature_security && melos run codegen:infra_supabase && melos run codegen:app
    codegen:core: melos exec --scope=core -- dart run build_runner build --delete-conflicting-outputs
    codegen:feature_auth: melos exec --scope=feature_auth -- dart run build_runner build --delete-conflicting-outputs
    codegen:feature_feed: melos exec --scope=feature_feed -- dart run build_runner build --delete-conflicting-outputs
    codegen:feature_security: melos exec --scope=feature_security -- dart run build_runner build --delete-conflicting-outputs
    codegen:infra_supabase: melos exec --scope=infra_supabase -- dart run build_runner build --delete-conflicting-outputs
    codegen:app: melos exec --scope=emobin -- dart run build_runner build --delete-conflicting-outputs
