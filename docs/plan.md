# README 표준화 규칙 (v1.0)

작성일: 2026-02-16

## 목적
- 모노레포의 README 문서를 동일한 구조로 맞춰 탐색 비용을 낮춘다.
- 패키지별 책임 범위와 실행 명령어를 빠르게 찾을 수 있게 한다.
- 신규 패키지 추가 시 문서 품질을 일관되게 유지한다.

## 적용 범위
- 루트 `README.md`
- `packages/*/README.md` 전체

## 공통 작성 원칙
- 문서 언어는 한국어를 기본으로 한다.
- 첫 문단은 "이 패키지가 무엇을 하는가"를 1~2문장으로 요약한다.
- 구현 상세를 장문으로 나열하지 않고, 공개 API와 사용 흐름 중심으로 작성한다.
- 명령어는 모두 실행 가능한 형태로 제공한다.
- 미구현 기능은 숨기지 말고 `상태` 섹션에서 명시한다.

## 루트 README 섹션 순서
1. `# emobin` (워크스페이스 개요)
2. `## 워크스페이스 구성`
3. `## 빠른 시작`
4. `## 주요 명령어`
5. `## 코드 생성`
6. `## 새 패키지 추가`
7. `## 문서 규칙`

## 패키지 README 섹션 순서
1. `# <package_name>` (패키지 개요)
2. `## 책임 범위`
3. `## 디렉터리`
4. `## 사용 예시`
5. `## 개발 명령어`
6. `## 연관 패키지`
7. `## 상태`

## 작성 세부 규칙
- `디렉터리`는 `lib/`, `test/` 기준으로 2~3 단계까지만 표기한다.
- `사용 예시`는 실제 export/API를 기준으로 10~25줄 내에서 작성한다.
- `개발 명령어`는 최소 `flutter test`를 포함하고, 코드 생성이 필요한 패키지는 `build_runner` 명령을 함께 적는다.
- `연관 패키지`는 workspace 내부 의존성만 기재한다.
- `상태`에는 안정/개선중/미구현 정보를 한 줄 이상 반드시 작성한다.

## UI 파일/클래스 네이밍 규칙 (v1.1)
- 대상: `app/lib/pages/**`
- 파일 suffix는 아래 4가지를 기본으로 사용한다.
- `*_page.dart`: 라우트 진입 페이지
- `*_screen.dart`: 라우트 화면(또는 페이지 내부 최상위 화면)
- `*_section.dart`: 화면의 레이아웃 단위 블록
- `*_widget.dart`: 재사용 가능한 UI 조각
- `*_state.dart`,  `*_card.dart` 같은 UI suffix는 신규 사용하지 않는다.
- 접근제어 규칙:
- `@RoutePage`가 붙는 외부 노출 클래스(`Page`/`Screen`)만 public 허용
- 나머지 UI 클래스/enum/헬퍼 함수는 모두 private(`_`)로 선언
- 목적: 파일/클래스 중복 충돌을 줄이고, 외부 공개 API 범위를 명확히 유지

---

# 감정 쓰레기통 앱 기획 (v0.2)

작성일: 2026-02-15

**목표**
- 오프라인에서도 감정 기록 가능(Drift 로컬 DB)
- 온라인 연결 시 Supabase로 업로드/동기화
- 해소되면 체크해서 해소 시각만 기록

**핵심 플로우**
1. 어떤 일이 있었는지 입력
2. 그때 감정이 어땠는지 기록
3. 해소됨 체크 → 해소 시각 기록
4. 오프라인이면 로컬 저장, 온라인이면 업로드/동기화

**MVP 범위**
- 오프라인 로컬 저장(Drift)
- 온라인 저장(Supabase)
- 동기화 상태 표시(로컬 전용/업로드 대기/동기화 완료)
- 감정 기록(상황/감정/시간)
- 해소됨 체크(해소 시각 기록)
- 목록/검색(간단 텍스트 검색)

**데이터 모델(논리 모델, 저장 방식 독립)**

Entry
| 필드 | 타입 | 설명 |
| --- | --- | --- |
| id | string (uuid) | 항목 고유 ID |
| server_id | string (nullable) | Supabase 레코드 ID |
| created_at | datetime | 생성 시각 |
| updated_at | datetime | 수정 시각 |
| event_text | string | 어떤 일이 있었는지 |
| emotion | enum | 감정 타입 |
| resolved_at | datetime | 해소 처리 시각(없으면 미해소) |
| deleted_at | datetime | 삭제 시각(없으면 미삭제) |
| sync_status | enum | local_only / pending_upload / synced / conflict |
| last_synced_at | datetime | 마지막 동기화 시각 |

**감정 enum 목록(초안)**
- 화남
- 불안
- 슬픔
- 기쁨
- 짜증
- 두려움
- 피곤
- 무기력

**동기화 정책(초안)**
- 트리거: 앱 실행 시, 네트워크 복귀 시, 수동 동기화 버튼
- 업로드 우선: local_only/pending_upload 항목을 Supabase에 반영
- 다운로드: 서버 변경분을 로컬에 반영
- 충돌 처리: TBD (예: 최신 수정 우선, 사용자 선택)

**오프라인 UX(초안)**
- 작성 시 "오프라인 저장됨" 상태 표시
- 동기화 대기 큐 및 진행 상태 표시

**보안/계정(결정 필요)**
- 로그인 필수 여부: TBD
- 익명 모드 지원 여부: TBD

**오픈 질문**
- 충돌 정책: 최신 수정 우선 vs 사용자 선택
- 삭제 정책: 완전 삭제 vs 휴지통(복구 가능)
- 로그인/익명 시작 플로우

**코드 구조 메모**
- 긴 매핑 로직은 mixin으로 분리하고 with로 합성한다
- 예: Drift 로컬 datasource의 row<->model 매핑, FeedRepository의 동기화 관련 유틸

---

## 피드 기능 이후 확장 제안 (v0.3)

### 우선순위 로드맵

단기(다음 스프린트)
- 반응(공감) 기능: 피드 진입 장벽을 낮추고 참여율을 올림
- 북마크(저장): 다시 보고 싶은 글을 모아 재방문율을 올림
- 피드 필터/정렬: 감정별/최신순/인기순으로 탐색 피로를 줄임

중기
- 댓글 기능: 피드백 루프 형성으로 커뮤니티 밀도 강화
- 신고/숨김/차단: 커뮤니티 안전성 확보
- 알림: 댓글/반응 수신으로 리텐션 강화

장기
- 추천 피드(개인화): 팔로우/관심 감정 기반으로 피드 품질 고도화
- 감정 인사이트: 주간 감정 추이, 자주 기록한 감정 요약 제공
- 콘텐츠 가이드: 업로드 전 민감 표현 경고/완화 가이드 제공

### 기능별 최소 구현 범위 (MVP 이후)

1. 반응(공감)
- 최소 구현
  - 항목당 공감 1종(토글)만 제공
  - 본인 반응 여부 + 총 반응 수 표시
- 확장 포인트
  - 다중 리액션(응원/공감/위로) 도입

2. 북마크
- 최소 구현
  - 북마크 추가/해제
  - 내 북마크 목록 화면
- 확장 포인트
  - 북마크 컬렉션(폴더) 기능

3. 댓글
- 최소 구현
  - 텍스트 댓글 작성/삭제
  - 본인 댓글만 삭제 가능
  - 댓글 수 표시
- 확장 포인트
  - 대댓글, 멘션, 댓글 좋아요

4. 신고/숨김/차단
- 최소 구현
  - 글 신고(사유 선택), 글 숨김, 사용자 차단
  - 차단한 사용자의 글은 피드에서 제외
- 확장 포인트
  - 관리자 검수 큐, 자동 제재 규칙

5. 알림
- 최소 구현
  - 내 글에 댓글/공감 발생 시 인앱 알림
  - 읽음 처리
- 확장 포인트
  - 푸시 알림, 알림 유형별 수신 설정

6. 추천 피드/인사이트
- 최소 구현
  - 최신 피드 + 감정 태그 기반 간단 추천
  - 주간 감정 분포(막대 차트)
- 확장 포인트
  - 개인 행동 기반 랭킹 모델, 회복 가이드 추천

### 데이터 모델 확장 초안

- `entry_reactions`
  - `id`, `entry_id`, `user_id`, `reaction_type`, `created_at`
  - 유니크 키: (`entry_id`, `user_id`, `reaction_type`)

- `entry_bookmarks`
  - `id`, `entry_id`, `user_id`, `created_at`
  - 유니크 키: (`entry_id`, `user_id`)

- `entry_comments`
  - `id`, `entry_id`, `user_id`, `content`, `created_at`, `deleted_at`

- `user_blocks`
  - `id`, `blocker_user_id`, `blocked_user_id`, `created_at`
  - 유니크 키: (`blocker_user_id`, `blocked_user_id`)

- `entry_reports`
  - `id`, `entry_id`, `reporter_user_id`, `reason`, `detail`, `created_at`, `status`

- `notifications`
  - `id`, `user_id`, `type`, `target_id`, `is_read`, `created_at`

### 결정 필요 항목
- 반응 종류를 1개(공감)로 시작할지, 2~3개로 시작할지
- 댓글 운영 정책(욕설 필터, 금칙어, 신고 임계치)
- 익명성 수준(닉네임 고정 여부, 프로필 공개 범위)
- 추천 피드 기준(최신 우선 vs 개인화 비중)
